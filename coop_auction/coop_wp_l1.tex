% для создания отдельной главы...
\documentclass[pdftex,12pt,a4paper]{article}

\input{e:/Documents/tex_general/title_bor_utf8}
%\input{title_bor_utf8}
%\input{e:/Documents/tex_general/prob_and_sol_utf8}
%\input{prob_and_sol_utf8}

%\usepackage{showkeys} % показывать метки
%\usepackage{verbatim}

\newcommand{\textbf}[1]{\textbf{#1}}

\numberwithin{equation}{page} % уравнения нумеруются на каждой стр. отдельно

\newtheorem{theorem}[equation]{Теорема} % нумерация сквозная с уравнениями
\theoremstyle{definition} % убирает курсив и что-то еще наверное делает ;)
\newtheorem{definition}[equation]{Определение}
\theoremstyle{definition}
\newtheorem{myex}[equation]{Пример}
%\newtheorem{assertion}{Утверждение}
%\newtheorem{lemma}{Лемма}
\theoremstyle{definition}
\newtheorem*{myproof}{Доказательство}

\title{Дистанционная авантюра.}
\author{Борис Демешев}
\date{\today}

%\makeindex % команда для создания предметного указателя
%\bibliographystyle{plain} % стиль оформления ссылок

\begin{document}

%\maketitle
%\tableofcontents{}

\section{Ядро и вектор Шепли. Первое знакомство}

\subsection{Игра в характеристической форме}

Начнем с обозначений:

$N$ - множество всех игроков, а $n$ - их количество.

\begin{definition}
Коалиция (coalition) - подмножество игроков.
\end{definition}

\begin{definition}
Большая коалиция (grand coalition) - синоним для множества всех игроков.
\end{definition}


\begin{definition}
Коалиционная игра в характеристической форме (coalitional game или cooperative game in characteristic form) это:

1. Множество игроков $N$.

2. Характеристическая функция (characteristic function), $v$, сопоставляющая каждой коалиции сумму денег, которую эта коалиция может заработать самостоятельно.
\end{definition}

Характеристическая функция может принимать отрицательные значения (например, при дележе расходов). Мы считаем, что пустая коалиция (куда никто не входит), не может заработать денег и никому ничего не должна, т.е. $v(\emptyset)=0$. Именно характеристическая функция полностью описывает игру в нашем случае.

\begin{myex} "Ботинки". Пара ботинок (левый плюс правый) стоит 600 рублей. Один ботинок без пары не стоит ничего. У Лени есть левый ботинок, у Левы - еще один такой же левый, а у Паши - правый. Здесь $N=\{$Леня,Лева,Паша$\}$, $v($Леня$)=v($Лева$)=v($Паша$)=0$ (в одиночку никто не может получить 600 рублей); $v($Леня,Лева$)=0$ (у них нет правого); для любой другой коалиции $S$, $v(S)=600$, т.к. есть и правый и левый ботинки. 
\end{myex}

\begin{myex} "Носки". Левые и правые носки ничем не отличаются. Пара носков стоит 60 рублей. Один носок ничего не стоит. У Андрея - три носка, у Бориса - пять носков. Здесь $N=\{$Андрей,Борис$\}$, $v($Андрей$)=60$, $v($Борис$)=120$, $v($Андрей, Борис$)=240$.
\end{myex}


Все упомянутые примеры обладают свойством, которое называется супераддитивностью (superadditivity):

Если несколько непересекающихся коалиций объединяются, то вместе как одна коалиция они заработают не меньше, чем по отдельности.

\begin{definition}
Игра называется супераддитивной, если для любых непересекающихся коалиций $S_{1}$, $S_{2}$, верно неравенство $v(S_{1}\cup S_{2})\geq v(S_{1})+v(S_{2})$.
\end{definition}

В такой игре у игроков есть интерес в создании большой коалиции и дележе полученного $v(N)$.

Вопрос в том, как поделить $v(N)$?

Мы обсудим две концепции решения - ядро и вектор Шепли.

\subsection{Ядро.}

Предположим, что большая коалиция решила каким-то образом разделить $v(N)$. С математической точки зрения, дележ - это вектор $x=(x_{1},x_{2},...,x_{n})$. Поскольку большая коалиция может заработать $v(N)$, то любой дележ обязан удовлетворять бюджетному ограничению $x_{1}+x_{2}+x_{3}+...+x_{n}\leq v(N)$. Чего мы хотим от дележа?

Собственно, всегда хочется двух условий: эффективность и устойчивости (в каких-нибудь смыслах).

Эффективность - это отсутствие потерь: вся доступная сумма $v(N)$ должна распределяться между игроками без остатка, т.е. неравенство $x_{1}+x_{2}+x_{3}+...+x_{n}\leq v(N)$ должно быть выполнено как равенство.

\begin{definition}. Условие \textbf{эффективности}. Дележ называется эффективным, если $x_{1}+x_{2}+x_{3}+...+x_{n}=v(N)$.
\end{definition}


Об устойчивости. Хочется, чтобы среди игроков не было сепаратистских тендеций. Допустим какой-нибудь коалиции $S$ при дележе достается меньше, чем та сумма, которую она может заработать самостоятельно. В таком случае игроки входящие в $S$ не захотят участвовать в большой коалиции, отсоединятся и получат больше. Отсоединившись, коалиция $S$ получает $v(S)$; а соглашаясь на дележ - получает $\sum_{i\in S} x_{i}$. Отсюда возникает:

\begin{definition}
Условие \textbf{отсутствия сепаратистских тенденций}. Дележ удовлетворяет условию отсутствия сепаратистских тендеций если для любой коалиции $S$: $\sum_{i\in S} x_{i}\geq v(S)$.
\end{definition}

\begin{definition} Ядро (Core) - это множество дележей, удовлетворяющих условиям:

1) Эффективности

2) Отсутствие сепаратистских тендеций.
\end{definition}

Находим ядро в наших примерах. Исходя из определения - ядро можно найти решая систему из одного уравнения и нескольких неравнеств.

\begin{myex}. Ботинки. $x_{l1}+x_{l2}+x_{r}=1$, $x_{l1}+x_{r}\geq 1$, $x_{l2}+x_{r}\geq 1$. Единственное решение - это $x_{l1}=x_{l2}=0$, $x_{r}=1$. Обладатель редкого ресурса получает все!
\end{myex}

\begin{myex}. Носки. $x_{1}+x_{2}=240$, $x_{1}\geq 60$, $x_{2}\geq 120$. Решение: любой дележ вида: $(x_{1},240-x_{1})$, где $x_{1}\in [60;120]$.
\end{myex}

Недостатки ядра. Во-первых, ядро бывает пустым. Оно бывает пустым из-за того, что условие полного отсутствия сепаратистских тенденций слишком сильное. Во-вторых, ядро бывает не единственным.

Эти две проблемы исправляет другая концепция - вектор Шепли (Shapley value). Он всегда существует и всегда единственный.

\subsection{Вектор Шепли}

Допустим игроки у нас занумерованы в некотором порядке $\pi$. Здесь $\pi$ - это не 3.14..., а некая последовательность чисел от 1 до $n$, например, $\{1,3,2,4,5\}$. Будем формировать большую коалицию добавляя игроков по одному в указанном порядке. Когда мы добавляем $i$-го игрока у нас уже сформирована некоторая коалиция $S$. Присоединяясь к этой коалиции $S$, игрок $i$ увеличивает достижимый выигрыш на $v(S\cup \{i\})-v(S)$. Назовем эту прибавку вкладом $i$-го игрока в большую коалицию, обозначим ее $Add(i,\pi)$. Обозначение не общепринятое, но мне кажется его введение оправдано.

Конечно же, вклад $i$-го игрока в большую коалицию, $Add(i,\pi)$, зависит от порядка формирования большой коалиции $\pi$. 

Например, в игре "Ботинки". Если формировать большую коалицию в порядке Леня, Лева, Паша, то вклад Левы равен нулю. Если формировать большую коалицию в порядке Паша, Лева, Леня, то вклад Левы равен 600 рублей.

Если же формировать большую коалицию добавляя игроков по одному в случайном порядке $\pi$, то прибавка, вносимая $i$-м игроком, $Add(i)$ - будет случайной величиной.

Вектор Шепли - это вектор $(\phi_{1},\phi_{2},...,\phi_{N})$, где выигрыш $i$-го игрока, $\phi_{i}$ определяется по принципу:

$\phi_{i}=E(Add(i))$.

\begin{definition} Вектор Шепли - это математическое ожидание вклада каждого игрока, если большая коалиция формируется в случайном порядке.
\end{definition}

Из определения ясно, что вектор Шепли всегда (по крайней мере при конечном числе игроков) существует и всегда единственный.

В наших примерах:

\begin{myex} Ботинки. Найдем $E(Add(r))$. Если Паша входит первым, то его вклад равен нулю, иначе его вклад равен 600. Значит $E(Add(r))=\frac{2}{3}600=400$. Вклад Лени равен 600 только если первым вошел Паша, а вторым - Леня. Значит $E(Add(l1))=\frac{1}{6}600=100$. Аналогично для Левы. Значит вектор Шепли равен: $(100,100,400)$.
\end{myex}

\begin{myex}. Носки. Возможно всего два порядка формирования большой коалиции: Андрей-Борис и Борис-Андрей. В первом случае вклады игроков равны $Add(a,ab)=60$, $Add(b,ab)=180$, во втором - $Add(b,ba)=120$ и $Add(a,ba)=120$. И вектор Шепли: $\phi_{a}=90$, $\phi_{b}=150$. Что соответствует интуитивному дележу в пропорции $3/5$.
\end{myex}


\begin{theorem} Вектор Шепли удовлетворяет требованию эффективности. $\sum \phi_{i}=v(N)$.
\end{theorem}
\begin{proof}
$$\sum \phi_{i}=\sum E(Add(i))=E (\sum Add(i));$$
Мы определяли $Add(i)$ как вклад $i$-го игрока при пошаговом построении большой коалиции. Поэтому суммарный вклад всех игроков всегда равен стоимости большой коалиции, $\sum Add(i)=v(N)$. Каждое $Add(i)$ - случайная величина, но их сумма (вне зависимости от порядка формирования большой коалиции) равна константе $v(N)$.
$$E(\sum Add(i))=E(v(N))=v(N)$$
\end{proof}

Лирическое отступление. Немного критики. В играх, которые мы рассматривали, предполагалось, что выигрыш (или полезность) можно перераспределять между игроками. Любая коалиция $S$ заработав $v(S)$ могла разделить этот выигрыш $v(S)$ между своими участниками произвольным образом. 

Насколько это реалистично? 

Деньги, конечно, можно делить. Но вот полезность они приносят разную, достаточно представить себе, что в игре "Носки" Андрей - бедный пенсионер, а Борис - богатый менеджер. 

Передаваема ли полезность? 

В одной из серий мультфильма про Удава, Попугая, Мартышку и Слоненка, Удав передавал Мартышке привет. У него было хорошое настроение. Как известно, первые два "Привета" кое-кто потерял, и только третий "Привет" достался Мартышке.

Отсюда вывод: деньги легко передаются, но не отражают полезность; полезность передеатся плохо.




\end{document}